import{r as c,j as t}from"./index-CeWYZAsF.js";import{f as h}from"./chunk-LSEVNFON-G8OzWBoO.js";const C={products:[],addProduct:e=>{console.log(e)},removeProduct:e=>{console.log(e)},updateProductQuantity:(e,r)=>{console.log(`product id${e}, quantity ${r}`)},total:0},p=c.createContext(C),x=()=>{const e=c.useContext(p);if(e)return e;throw new Error("useShoppingCart is used outside of ShoppingCartContextProvider!")};function j(e){return Array.from({length:e},()=>({id:h.string.uuid(),name:h.commerce.productName(),price:parseFloat(h.commerce.price())}))}const y=j(10),g=()=>{const{addProduct:e}=x();return t.jsxs("div",{children:[t.jsx("h3",{children:"Recommended Products"}),t.jsx("ol",{children:y.map(r=>t.jsxs("li",{style:{display:"flex",justifyContent:"space-between",margin:"10px"},children:[t.jsxs("span",{children:[r.name," | ₹",r.price," "]}),t.jsx("button",{onClick:()=>{e(r)},children:"add to cart"})]},r.id))})]})},P=()=>{const{total:e,products:r,removeProduct:o,updateProductQuantity:n}=x();return t.jsxs("div",{className:"shopping-cart",children:[t.jsx("div",{className:"shopping-cart-grand-total",children:t.jsxs("span",{style:{fontWeight:"bold",fontSize:"1.1rem"},children:["Grand Total: ₹",e.toFixed(2)]})}),t.jsxs("table",{children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"name"}),t.jsx("th",{children:"price"}),t.jsx("th",{children:"quantity"}),t.jsx("th",{children:"row total"}),t.jsx("th",{children:"actions"})]})}),t.jsx("tbody",{children:r.map(a=>{const{id:d,name:l,price:i,quantity:s}=a;return t.jsxs("tr",{children:[t.jsx("td",{children:l}),t.jsx("td",{children:i}),t.jsx("td",{children:s}),t.jsx("td",{children:(i*s).toFixed(2)}),t.jsx("td",{children:t.jsxs("div",{className:"actions",children:[t.jsx("button",{onClick:()=>n(d,s-1),disabled:s==1,children:"-"}),t.jsx("input",{type:"number",value:s,min:1,step:1,onChange:m=>{const u=+m.target.value;!Number.isNaN(u)&&u>0?n(d,u):n(d,s)}}),t.jsx("button",{onClick:()=>n(d,s+1),children:"+"}),t.jsx("button",{onClick:()=>o(d),children:"remove"})]})})]},d)})})]})]})},f=j(3).map(e=>({...e,quantity:1})),v=(e,r)=>{let o;switch(r.type){case"ADD_PRODUCT":return o=e.find(n=>n.id===r.payload.id),o?e.map(n=>r.payload.id===n.id?{...n,quantity:n.quantity+1}:n):[...e,{...r.payload,quantity:1}];case"REMOVE_PRODUCT":return e.filter(n=>n.id!==r.id);case"UPDATE_QUANTITY":return e.map(n=>n.id===r.id?{...n,quantity:r.quantity>0?r.quantity:n.quantity}:n);default:return e}},b=({children:e})=>{const[r,o]=c.useReducer(v,f),n=c.useCallback(i=>{o({type:"ADD_PRODUCT",payload:i})},[]),a=c.useCallback(i=>{o({type:"REMOVE_PRODUCT",id:i})},[]),d=c.useCallback((i,s)=>{o({type:"UPDATE_QUANTITY",id:i,quantity:s})},[]),l=c.useMemo(()=>r.reduce((i,s)=>s.price*s.quantity+i,0),[r]);return t.jsx(p,{value:{products:r,addProduct:n,removeProduct:a,updateProductQuantity:d,total:l},children:e})},T=()=>t.jsxs("div",{className:"shopping-cart-container",children:[t.jsx("h1",{children:"Shopping Cart Container"}),t.jsxs(b,{children:[t.jsx(P,{}),t.jsx(g,{})]})]});export{T as default};
